<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>All Projects - Student PBL</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    html { scroll-behavior: smooth; }
  </style>
</head>

<body class="bg-gray-100">

  <!-- NAVBAR -->
  <nav class="bg-white shadow-md fixed top-0 left-0 w-full z-50">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <h1 class="text-2xl font-bold text-blue-600">All Projects</h1>
      <a href="index.html" class="text-blue-600 font-semibold hover:underline">Home</a>
    </div>
  </nav>

  <section class="pt-28 max-w-7xl mx-auto px-6 pb-16">

    <!-- SEARCH BAR -->
    <div class="mb-8">
      <input
        id="searchBox"
        type="text"
        placeholder="Search projects by title, category, age, difficulty..."
        class="w-full p-4 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-600"
      />
    </div>

    <!-- PROJECT GRID -->
    <div id="projectGrid"
         class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
    </div>

    <!-- NO RESULTS -->
    <p id="noResults"
       class="hidden text-center text-gray-600 text-xl mt-10">
       No matching projects found.
    </p>

  </section>

  <!-- FOOTER -->
  <footer class="bg-blue-600 text-white text-center py-4">
    © 2025 Student PBL Platform<br>
    <b>Developed by NLR GROUP OF COMAPNY</b>
  </footer>

<script>
let projectsData = [];

// Load JSON
async function loadProjects() {
  try {
    const res = await fetch("projects.json");
    projectsData = await res.json();
    displayProjects(projectsData);
  } catch (err) {
    console.error("Failed to load projects:", err);
  }
}

// Render cards
function displayProjects(list) {
  const grid = document.getElementById("projectGrid");
  const noResults = document.getElementById("noResults");

  grid.innerHTML = "";

  if (list.length === 0) {
    noResults.classList.remove("hidden");
    return;
  }

  noResults.classList.add("hidden");

  list.forEach(p => {
    grid.innerHTML += `
      <div class="bg-white rounded-lg shadow p-4 hover:shadow-lg transition">
        <img src="${p.image}"
             class="w-full h-40 object-cover rounded mb-3" />

        <h3 class="text-xl font-bold text-blue-600">${p.title}</h3>
        <p class="text-gray-600 text-sm mt-1">${p.category}</p>
        <p class="text-gray-700 text-sm mt-1 line-clamp-2">${p.summary}</p>

        <a href="singleProject.html?id=${p.id}"
           class="mt-3 inline-block text-blue-600 underline font-semibold">
           View Project →
        </a>
      </div>
    `;
  });
}

// SEARCH FUNCTION
document.getElementById("searchBox").addEventListener("input", function () {
  const s = this.value.toLowerCase();

  const filtered = projectsData.filter(p =>
       p.title.toLowerCase().includes(s) ||
       p.category.toLowerCase().includes(s) ||
       p.age.toLowerCase().includes(s) ||
       p.summary.toLowerCase().includes(s) ||
       p.difficulty.toLowerCase().includes(s)
  );

  displayProjects(filtered);
});

// Load projects on page load
loadProjects();

</script>

</body>
</html>
